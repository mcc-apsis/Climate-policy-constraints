{
    "collab_server" : "",
    "contents" : "\nrm(list = ls())\nlibrary(tidyverse)\nlibrary(xlsx)\n\n##### import data from Matlab\n\nfile.copy('C:/Users/lamw/Google Drive/Work/Code/MATLAB/Data shop/Aggregation/Transition challenges/pe.xls','Data/',overwrite=TRUE)\npe<-read.xlsx('Data/pe.xls','data')\n\nsave(pe,file='Data/pe.RData')\n\n\n##### import remind data\n\nlibrary(openxlsx)\nremind <- read.xlsx('Data\\\\ERL_13_064038_SD_Scenario_data.xlsx','Scenario_data_R5')\n\nsave(remind,file='Data/remind.RData')\n\n\n##### Values Surveys\n# European\nlibrary(foreign)\nEVS <- foreign::read.dta(\"Data/European Values Survey.dta\") %>% \n  select(S003,A165)\nEVS$trust[grepl(\"Most people can be trusted\",EVS$A165)] <- 1\nEVS$trust[grepl(\"CanÂ´t be too careful\",EVS$A165)] <- 0\nEVS <- EVS %>% \n  group_by(S003) %>% \n  summarise(EVS_trust=mean(trust,na.rm=T))\n\n#Latin American\nLAVS <- foreign::read.dta(\"Data/Latinobarometro2017Eng_v20180117.dta\") %>% \n  select(idenpa,P13STGBS)\nLAVS$trust[grepl(\"One can never be too careful when dealing with others\",LAVS$P13STGBS)] <- 0\nLAVS$trust[grepl(\"Most people can be trusted\",LAVS$P13STGBS)] <- 1\nLAVS <- LAVS %>% \n  group_by(idenpa) %>% \n  summarise(LAVS_trust=mean(trust,na.rm=T))\n\n#African\nAVS <- foreign::read.spss(\"Data/Afrobarometer.sav\")\nAVS <- data.frame(AVS) %>% \n  select(COUNTRY,Q87)\nAVS$trust[grepl(\"Must be very careful\",AVS$Q87)] <- 0\nAVS$trust[grepl(\"Most people can be trusted\",AVS$Q87)] <- 1\nAVS <- AVS %>% \n  group_by(COUNTRY) %>% \n  summarise(AVS_trust=mean(trust,na.rm=T))\n\n# merge, check consistency\nRVS <- pe %>% \n  select(Country,ISO,Year,values_trust_sta) %>% \n  mutate_all(funs(na.locf(.,na.rm=FALSE)))\nRVS <- left_join(RVS,EVS,by=c(\"Country\"=\"S003\"))\nRVS <- left_join(RVS,LAVS,by=c(\"Country\"=\"idenpa\"))\nRVS <- left_join(RVS,AVS,by=c(\"Country\"=\"COUNTRY\")) %>% \n  filter(Year==2015)\n\nRVS <- RVS %>% \n  mutate(regional=ifelse(is.na(EVS_trust)==FALSE,EVS_trust,LAVS_trust)) %>% \n  mutate(regional=ifelse(is.na(AVS_trust)==FALSE,AVS_trust,regional)) %>% \n  mutate(trust=ifelse(is.na(regional)==FALSE,regional,values_trust_sta))\n\nRVS %>% \n  ggplot(.,aes(x=regional,y=values_trust_sta)) +\n  geom_point() +\n  geom_abline(intercept=0,slope=1)\n         \nRVS %>%\n  filter(!is.na(trust)) %>%\n  arrange(desc(trust)) %>% \n  ggplot(.,aes(x=reorder(Country, trust),y=trust))+\n  geom_bar(stat='identity') + \n  theme(axis.text.x = element_text(angle = 90, hjust = 1,vjust=0.35))\n  \nsave(RVS,file='Data/RVS.RData')\n",
    "created" : 1534411678386.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3526466578",
    "id" : "95E1EC2",
    "lastKnownWriteTime" : 1540825646,
    "last_content_update" : 1540825646894,
    "path" : "C:/Users/lamw/Google Drive/Work/Publications/Transition challenges/R/import_data.R",
    "project_path" : "R/import_data.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}